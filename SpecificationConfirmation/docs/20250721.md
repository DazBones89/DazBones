# DazBones ホームページ 実装前詳細確認リスト

## ✅ （A）セッション・認証

| 項目        | 検討・決定すべき内容                   | 補説                   |
| --------- | ---------------------------- | -------------------- |
| セッション属性名  | `userRole` または `userSession` | Java、HTML両方で共通化する    |
| 未ログイン時の動作 | 404 表示またはトップページへのリダイレクト      | ControllerAdvice で制御 |
| ログイン後の遷移  | トップページへ                      |                      |

---

##  （B）ファイルアップロード

| 項目         | 検討・決定すべき内容                | 補説            |
| ---------- | ------------------------- | ------------- |
| 保存場所       | ローカル (`/img/players/`)    | Spring側で指定必要  |
| ファイル名重複対策  | UUID+拡張子 または timestamp 付加 | 重複を避ける        |
| 拡張子制限      | jpg, png                  | MIME・拡張子の両方検査 |
| アップロード容量制限 | 最大500KB程度                 | validation要   |
| 圧縮・リサイズ処理  | 行わない (optional)           | 将来的に検討可       |

---

##  （C）画像表示

| 項目          | 検討・決定すべき内容                   | 補説                 |
| ----------- | ---------------------------- | ------------------ |
| 読み出しパス      | `/images/players/{filename}` | ResourceHandlerで設定 |
| 未登録時デフォルト画像 | `noimage.jpg`                | 用意して表示             |

---

##  （D）LINE通知

| 項目       | 検討・決定すべき内容           | 補説                  |
| -------- | -------------------- | ------------------- |
| 通知対象     | アンケート作成時             |                     |
| トークン保管場所 | .env, properties, DB | セキュリティ対策要           |
| 失敗時対応    | DBにログ保存              | retryは不必 (optional) |

---

##  （E）通知履歴・ログ

| 項目   | 検討・決定すべき内容           | 補説                  |
| ---- | -------------------- | ------------------- |
| 保存項目 | 日時, 送信先, 内容, 成否, 作成者 | 通知IDで管理             |
| 保存期間 | 30日間置きに自動削除          | Spring Scheduler化可能 |
| 表示順  | 新着順                  |                     |

---

##  （F）操作履歴

| 項目   | 検討・決定すべき内容     | 補説         |
| ---- | -------------- | ---------- |
| 存記範囲 | 編集, 削除操作, ログイン | DBに保存      |
| 表示項目 | 日時, ユーザー, 操作種類 | 検索機能は後編で検討 |

---

##  （G）外部連携

| 項目         | 検討・決定すべき内容            | 補説       |
| ---------- | --------------------- | -------- |
| SnapWidget | HTML直埋め or JS非同期      | ロード選択を検討 |
| Graph API  | SnapWidget上例で問題なければ不要 |          |

---

##  （H）Google Analytics

| 項目      | 検討・決定すべき内容           | 補説     |
| ------- | -------------------- | ------ |
| GAバージョン | GA4                  | UAは非推奨 |
| 設置場所    | layout.html の footer | 全画面に適用 |

---

##  （I）デザインUI

| 項目     | 検討・決定すべき内容             | 補説      |
| ------ | ---------------------- | ------- |
| 状態保持方法 | Cookie or LocalStorage | 再表示時に反映 |
| 切り替えUI | ヘッダー右上 or ナビ下          | モバイル対応要 |

---

##  （J）バリデーション

| 項目   | 検討・決定すべき内容     | 補説                 |
| ---- | -------------- | ------------------ |
| 入力制限 | 名前100文字以内、空欄NG | HTML + Server両方で検証 |

---

##  （K）バックアップ

| 項目         | 検討・決定すべき内容  | 補説                    |
| ---------- | ----------- | --------------------- |
| DBバックアップ   | 週一度 / 5世代保持 | cron / shell script 化 |
| ファイルバックアップ | 変更時         | 実装方法要検討               |

---

##  （L）アクセシビリティ

| 項目      | 検討・決定すべき内容  | 補説       |
| ------- | ----------- | -------- |
| キーボード操作 | Tab でボタン選択可 | OK       |
| 読み上げ対応  | 必須なし        | optional |

---
##  次のステップ

・内容確認→方針決定
